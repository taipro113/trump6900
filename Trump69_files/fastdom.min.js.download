"use strict";!function(t){function e(){var e=this;e.reads=[],e.writes=[],e.raf=o.bind(t),s("initialized",e)}function n(t){t.scheduled||(t.scheduled=!0,t.raf(i.bind(null,t)),s("flush scheduled"))}function i(t){s("flush");var e,i=t.writes,r=t.reads;try{s("flushing reads",r.length),t.runTasks(r),s("flushing writes",i.length),t.runTasks(i)}catch(t){e=t}if(t.scheduled=!1,(r.length||i.length)&&n(t),e){if(s("task errored",e.message),!t.catch)throw e;t.catch(e)}}function r(t,e){var n=t.indexOf(e);return!!~n&&!!t.splice(n,1)}var s=function(){},o=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,16)};e.prototype={constructor:e,runTasks:function(t){var e;for(s("run tasks");e=t.shift();)e()},measure:function(t,e){s("measure");var i=e?t.bind(e):t;return this.reads.push(i),n(this),i},mutate:function(t,e){s("mutate");var i=e?t.bind(e):t;return this.writes.push(i),n(this),i},clear:function(t){return s("clear",t),r(this.reads,t)||r(this.writes,t)},extend:function(t){if(s("extend",t),"object"!=typeof t)throw new Error("expected object");var e=Object.create(this);return function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(e,t),e.fastdom=this,e.initialize&&e.initialize(),e},catch:null};var a=t.fastdom=t.fastdom||new e;"function"==typeof define?define((function(){return a})):"object"==typeof module&&(module.exports=a)}("undefined"!=typeof window?window:void 0),function(){function t(t,e,n,i){var r,s=t._tasks,o=t.fastdom,a=new Promise((function(t,u){r=o[e]((function(){s.delete(a);try{t(i?n.call(i):n())}catch(t){u(t)}}),i)}));return s.set(a,r),a}var e={initialize:function(){this._tasks=new Map},mutate:function(e,n){return t(this,"mutate",e,n)},measure:function(e,n){return t(this,"measure",e,n)},clear:function(t){var e=this._tasks,n=e.get(t);this.fastdom.clear(n),e.delete(t)}};"f"==(typeof define)[0]?define((function(){return e})):"o"==(typeof module)[0]?module.exports=e:window.fastdomPromised=e}(),window.fastdomPromised=fastdom.extend(fastdomPromised);